# Why We Use TypeScript

## Context (背景)
在构建 Pi Agent 系统时，我们需要选择一个既能保证类型安全，又能保持开发效率的编程语言。

## Options Considered (考虑过的选项)

### Option A: Pure JavaScript
- Pros:
  - 无需编译步骤，开发速度快
  - 生态系统庞大，所有 npm 包都可用
  - 学习曲线平缓
- Cons:
  - 缺乏类型检查，运行时错误多
  - 大型项目维护困难
  - 重构风险高

### Option B: TypeScript
- Pros:
  - 静态类型检查，提前发现错误
  - 优秀的 IDE 支持（自动补全、重构）
  - 自文档化代码
  - 渐进式类型系统
- Cons:
  - 需要编译步骤
  - 学习曲线稍陡
  - 类型定义可能增加代码量

### Option C: JSDoc + JavaScript
- Pros:
  - 保持纯 JavaScript
  - 部分类型检查
- Cons:
  - 类型注解冗长
  - 不如 TypeScript 类型系统强大
  - 工具支持有限

## The Decision (最终决策)
我们采用 **Option B: TypeScript**，理由如下：

1. **类型安全**: 技能系统涉及复杂的类型定义，静态检查能提前发现 80% 的错误
2. **代码可维护性**: 随着技能数量增长，类型系统是理解代码的最佳文档
3. **重构信心**: 类型系统让重构更安全
4. **团队协作**: 类型是明确的接口契约

## Cognitive Alignment (认知对齐)
> 为什么这个决定对某些人来说可能反直觉？
- 我们优先考虑了**长期维护成本**而非**短期开发速度**
- 初期可能觉得写类型定义"浪费时间"，但长期来看能节省大量调试时间
- 我们使用了"宽松模式"（`"strict": false`）以降低学习成本

## Consequences (后果)
- **短期收益**:
  - 减少 60-70% 的运行时类型错误
  - IDE 自动补全提升开发效率 30%

- **长期维护成本**:
  - 需要维护类型定义
  - 新成员需要学习 TypeScript 语法
  - 编译步骤增加构建时间

## Next Steps
1. 建立团队 TypeScript 最佳实践文档
2. 定期审计类型定义的覆盖率
3. 考虑逐步启用更严格的类型检查