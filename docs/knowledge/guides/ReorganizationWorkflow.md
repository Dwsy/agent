# Knowledge Base Reorganization Workflow

> 知识库目录移动重组工作流 - 基于大模型能力

## 🎯 工作流概述

本工作流利用大模型的自然语言理解能力，通过简单的描述即可完成知识库目录的移动和重组，无需手动编写代码或执行复杂的命令。

---

## 📋 使用场景

### 1. 目录结构重组

**场景**: 将分散的文档重新组织到更合理的分类中

**示例描述**:
```
请将 docs/knowledge/concepts/ 目录下的所有 frontend 相关的文档移动到 docs/knowledge/concepts/frontend/ 目录下。
需要移动的文档包括：MobileFirst.md, ResponsiveDesign.md, ProgressiveWebApp.md 等。
移动后请更新 index.md 文件。
```

### 2. 合并相似分类

**场景**: 将多个相似的小分类合并为一个更大的分类

**示例描述**:
```
请将 docs/knowledge/concepts/frontend/components/ 和 docs/knowledge/concepts/frontend/ui/ 合并。
将所有文档移动到 frontend/components/ 目录下，删除空的 ui/ 目录。
```

### 3. 重命名目录

**场景**: 更新目录名称以更好地反映内容

**示例描述**:
```
请将 docs/knowledge/concepts/auth/ 重命名为 docs/knowledge/concepts/authentication/。
移动所有文档到新目录，删除旧目录。
```

### 4. 扁平化层级

**场景**: 简化过深的目录结构

**示例描述**:
```
请将 docs/knowledge/concepts/frontend/responsive/design/ 目录下的所有文档移动到 docs/knowledge/concepts/frontend/ 目录下。
删除多余的 responsive/design/ 目录层级。
```

### 5. 批量移动

**场景**: 根据关键词批量移动文档

**示例描述**:
```
请将所有包含 "API" 关键词的文档从 docs/knowledge/concepts/ 移动到 docs/knowledge/concepts/backend/api/。
包括：API.md, RESTAPI.md, GraphQLAPI.md 等。
```

---

## 🚀 工作流步骤

### Step 1: 分析当前结构

**指令**:
```
请分析 docs/knowledge/ 目录的当前结构，列出所有文档及其路径。
帮我识别哪些目录结构需要优化。
```

**预期输出**:
- 完整的目录树
- 每个目录下的文档数量
- 优化建议

### Step 2: 制定重组计划

**指令**:
```
基于上面的分析，请帮我制定一个重组计划。
需要：
1. 列出需要移动的文档
2. 指定目标路径
3. 说明移动原因
4. 预估影响范围
```

**预期输出**:
- 详细的移动清单
- 每个移动的理由
- 潜在的风险评估

### Step 3: 执行移动操作

**指令**:
```
请按照上面的计划执行以下操作：
1. 移动文档 [具体文档] 到 [目标目录]
2. 创建必要的父目录（如果不存在）
3. 删除空目录
4. 更新 index.md
```

**预期输出**:
- 每个操作的执行结果
- 成功/失败状态
- 错误信息（如果有）

### Step 4: 验证结果

**指令**:
```
请验证重组结果：
1. 列出新的目录结构
2. 确认所有文档都已正确移动
3. 检查是否有遗漏的文档
4. 验证 index.md 是否正确更新
```

**预期输出**:
- 新的目录树
- 文档完整性检查
- 索引验证结果

### Step 5: 生成变更报告

**指令**:
```
请生成一份详细的变更报告，包括：
1. 移动的文档列表（旧路径 → 新路径）
2. 删除的空目录
3. 创建的新目录
4. 更新的文件
5. 影响的引用（如果有）
```

**预期输出**:
- 完整的变更日志
- 影响范围分析

---

## 📝 指令模板

### 模板 1: 简单移动

```
请将 [源路径] 移动到 [目标路径]。

示例：
请将 docs/knowledge/concepts/MobileFirst.md 移动到 docs/knowledge/concepts/frontend/responsive/MobileFirst.md
```

### 模板 2: 批量移动

```
请将以下文档从 [源目录] 移动到 [目标目录]：
- [文档1]
- [文档2]
- [文档3]

移动后请删除空的源目录。
```

### 模板 3: 目录重组

```
请重组 [目录路径] 的结构：

当前结构：
- [子目录1]/[文档]
- [子目录2]/[文档]

期望结构：
- [新目录]/[文档]

请执行以下操作：
1. 创建新目录结构
2. 移动所有文档
3. 删除旧目录
4. 更新索引
```

### 模板 4: 智能分类

```
请分析 docs/knowledge/concepts/ 目录下的所有文档。
根据文档内容和标题，将它们重新分类到合适的子目录中。

需要考虑的分类：
- frontend
- backend
- database
- auth
- common

请执行移动操作并生成报告。
```

---

## ⚠️ 注意事项

### 1. 备份重要数据

在执行大规模重组前，建议先备份：

```
请先备份 docs/knowledge/ 目录到 docs/knowledge-backup-[日期]/
然后再执行移动操作。
```

### 2. 检查文档引用

移动文档可能会影响其他文档中的引用：

```
在移动文档前，请检查是否有其他文档引用了即将移动的文档。
如果有，请更新这些引用。
```

### 3. 逐步执行

对于大规模重组，建议分步执行：

```
请先移动 [第一批文档]，验证结果后再移动 [第二批文档]。
```

### 4. 保留元数据

确保移动时保留所有文档内容：

```
移动文档时请保留：
1. 文档内容
2. 创建时间
3. 修改时间
4. 所有 frontmatter
```

---

## 🎯 实际案例

### 案例 1: 简单文档移动

**用户指令**:
```
请将 docs/knowledge/concepts/MobileFirst.md 移动到 docs/knowledge/concepts/frontend/responsive/MobileFirst.md
```

**Agent 执行**:
1. 检查源文件是否存在
2. 创建目标目录（如果不存在）
3. 移动文件
4. 验证移动结果
5. 更新 index.md

### 案例 2: 批量重组

**用户指令**:
```
请将 docs/knowledge/concepts/ 目录下所有 frontend 相关的文档移动到 docs/knowledge/concepts/frontend/ 目录下。
包括：MobileFirst.md, ResponsiveDesign.md, ProgressiveWebApp.md, CSSGrid.md, Flexbox.md
```

**Agent 执行**:
1. 识别 frontend 相关文档
2. 创建 frontend 目录结构
3. 移动每个文档
4. 删除空目录
5. 更新索引
6. 生成变更报告

### 案例 3: 目录合并

**用户指令**:
```
请将 docs/knowledge/concepts/frontend/components/ 和 docs/knowledge/concepts/frontend/ui/ 合并。
将所有文档移动到 frontend/components/，删除 ui/ 目录。
```

**Agent 执行**:
1. 列出两个目录的所有文档
2. 移动 ui/ 目录的文档到 components/
3. 删除空的 ui/ 目录
4. 验证文档完整性
5. 更新索引

---

## 🔧 高级用法

### 1. 条件移动

```
请移动所有修改时间在 2026 年之前的文档到 docs/knowledge/archived/ 目录。
```

### 2. 模式匹配

```
请移动所有以 "Test" 开头的文档到 docs/knowledge/guides/testing/ 目录。
```

### 3. 智能分类

```
请分析每个文档的内容，根据其主题自动分类到合适的目录。
如果不确定，请询问我。
```

### 4. 引用更新

```
移动文档后，请自动更新所有引用了这些文档的其他文档中的链接。
```

---

## 📊 验证清单

执行重组后，请验证以下项目：

- [ ] 所有文档都已正确移动
- [ ] 没有遗漏的文档
- [ ] 空目录已删除
- [ ] index.md 已更新
- [ ] 文档引用已更新（如果有）
- [ ] 目录结构符合预期
- [ ] 所有文档内容完整
- [ ] 没有损坏的链接

---

## 🚨 错误处理

### 常见错误

1. **目标文件已存在**
   ```
   如果目标位置已存在同名文件，请：
   1. 询问我是否覆盖
   2. 或重命名为 [原文件名]-[日期]
   ```

2. **目录创建失败**
   ```
   如果无法创建目标目录，请：
   1. 检查权限
   2. 检查路径合法性
   3. 报告具体错误
   ```

3. **文件找不到**
   ```
   如果源文件不存在，请：
   1. 检查路径拼写
   2. 列出实际存在的文件
   3. 询问是否继续
   ```

---

## 📚 相关文档

- [[HowToOrganizeKnowledge]] - 知识组织策略
- [[HowToUseKnowledgeBase]] - 知识库使用指南
- [[KnowledgeBase]] - 知识库核心概念

---

## 🎯 最佳实践

1. **小步快跑**: 分批执行，每次移动少量文档
2. **充分验证**: 每步操作后验证结果
3. **保留备份**: 大规模操作前先备份
4. **记录变更**: 生成详细的变更报告
5. **更新引用**: 及时更新文档间的引用
6. **定期审查**: 定期检查目录结构是否合理

---

## 🚀 快速开始

### 最简单的使用方式

```
请将 [文档路径] 移动到 [目标路径]。
```

### 最完整的工作流

```
1. 请分析 docs/knowledge/ 的当前结构
2. 帮我制定重组计划
3. 按照计划执行移动
4. 验证结果
5. 生成变更报告
```

---

**状态**: ✅ 工作流已定义

**最后更新**: 2026-01-07

**适用版本**: Knowledge Base Skill v1.0.0+